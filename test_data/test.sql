BEGIN;

INSERT INTO categories (name, parent_id) VALUES
('Электроника', NULL),
  
('Смартфоны', 1),
('Ноутбуки', 1),
('Телевизоры', 1),
('Наушники', 1),
  
('Apple iPhone', 2),
('Samsung Galaxy', 2),
('Xiaomi', 2),
  
('Игровые ноутбуки', 3),
('Ультрабуки', 3),
('Макбуки', 3);

INSERT INTO categories (name, parent_id) VALUES
('Одежда', NULL),
  
('Мужская одежда', 12),
('Женская одежда', 12),
('Детская одежда', 12),

('Футболки', 13),
('Джинсы', 13),
('Куртки', 13);

INSERT INTO categories (name, parent_id) VALUES
('Бытовая техника', NULL),
('Холодильники', 19),
('Стиральные машины', 19),
('Пылесосы', 19);


INSERT INTO products (name, quantity, price, category_id) VALUES
('iPhone 15 Pro', 50, 99999.00, 6), -- 1
('iPhone 15', 75, 79999.00, 6), -- 2
('iPhone 14', 30, 59999.00, 6), -- 3
('iPhone 13', 20, 49999.00, 6), -- 4

('Samsung Galaxy S24', 60, 89999.00, 7), -- 5
('Samsung Galaxy S23', 45, 69999.00, 7), -- 6
('Samsung Galaxy A54', 100, 29999.00, 7), -- 7

('Xiaomi 14', 40, 59999.00, 8), -- 8
('Xiaomi 13T', 55, 39999.00, 8), -- 9
('Redmi Note 13', 80, 19999.00, 8), -- 10

('ASUS ROG Strix', 15, 149999.00, 9), -- 11
('MSI Katana', 12, 129999.00, 9), -- 12
('Lenovo Legion', 18, 139999.00, 9), -- 13

('Dell XPS 13', 25, 119999.00, 10), -- 14
('HP Spectre', 20, 109999.00, 10), -- 15
('Lenovo ThinkPad', 30, 89999.00, 10), -- 16

('MacBook Pro 16"', 10, 199999.00, 11), -- 17
('MacBook Air 13"', 22, 99999.00, 11), -- 18

('Футболка хлопковая черная', 200, 1499.00, 14), -- 19
('Футболка с принтом', 150, 1999.00, 14), -- 20
('Футболка поло', 100, 2999.00, 14), -- 21

('Джинсы классические', 80, 4999.00, 15), -- 22
('Джинсы скинни', 60, 4599.00, 15), -- 23
('Джинсы джоггеры', 45, 3999.00, 15), -- 24

('Куртка джинсовая', 40, 7999.00, 16), -- 25
('Куртка ветровка', 35, 5999.00, 16), -- 26
('Куртка кожаная', 15, 19999.00, 16), -- 27

('Холодильник Samsung', 25, 89999.00, 20), -- 28
('Холодильник LG', 20, 79999.00, 20), -- 29
('Стиральная машина Bosch', 30, 49999.00, 21), -- 30
('Стиральная машина Indesit', 40, 29999.00, 21), -- 31
('Пылесос Dyson', 35, 39999.00, 22), -- 32
('Пылесос Samsung', 50, 19999.00, 22);

INSERT INTO clients (name, address) VALUES
('Иван Иванов', 'Москва, ул. Тверская, д. 1, кв. 10'), -- 1
('Петр Петров', 'Санкт-Петербург, Невский пр., д. 25'), -- 2
('Мария Сидорова', 'Москва, ул. Арбат, д. 15, кв. 5'), -- 3
('Анна Козлова', 'Екатеринбург, ул. Ленина, д. 42'), -- 4
('Сергей Смирнов', 'Новосибирск, ул. Кирова, д. 8, кв. 12'), -- 5
('Ольга Новикова', 'Казань, ул. Баумана, д. 33'), -- 6
('Дмитрий Волков', 'Москва, ул. Новый Арбат, д. 21'), -- 7
('Елена Зайцева', 'Санкт-Петербург, ул. Садовая, д. 7, кв. 3'), -- 8
('Алексей Морозов', 'Ростов-на-Дону, ул. Большая Садовая, д. 10'), -- 9
('Наталья Павлова', 'Владивосток, ул. Светланская, д. 15'); --10

INSERT INTO orders (client_id, created_at, closed_at) VALUES
(1, '2025-09-05 10:30:00', '2025-09-05 11:00:00'), -- 1
(2, '2025-09-10 14:15:00', '2025-09-10 14:45:00'), -- 2
(3, '2025-09-15 16:20:00', '2025-09-15 16:50:00'), -- 3
(4, '2025-09-20 11:45:00', '2025-09-20 12:15:00'), -- 4
(5, '2025-09-25 13:10:00', '2025-09-25 13:40:00'), -- 5
(6, '2025-09-28 15:30:00', '2025-09-28 16:00:00'), -- 6

(7, '2025-10-01 09:15:00', '2025-10-01 09:45:00'), -- 7
(8, '2025-10-03 12:20:00', '2025-10-03 12:50:00'), -- 8
(9, '2025-10-07 14:35:00', '2025-10-07 15:05:00'), -- 9
(10,'2025-10-10 10:50:00', '2025-10-10 11:20:00'),-- 10
(1, '2025-10-12 16:25:00', '2025-10-12 16:55:00'), -- 11
(2, '2025-10-15 13:40:00', '2025-10-15 14:10:00'), -- 12
(3, '2025-10-18 11:55:00', '2025-10-18 12:25:00'), -- 13
(4, '2025-10-20 15:10:00', '2025-10-20 15:40:00'), -- 14
(5, '2025-10-22 17:30:00', '2025-10-22 18:00:00'), -- 15
(6, '2025-10-25 14:45:00', '2025-10-25 15:15:00'), -- 16
(7, '2025-10-28 10:20:00', NULL); -- Незакрытый заказ -- 17

INSERT INTO order_items (order_id, product_id, quantity) VALUES
(1, 1, 2),  -- iPhone 15 Pro
(1, 17, 1), -- MacBook Pro 16"
(1, 19, 3), -- Футболка хлопковая черная

(2, 5, 1),  -- Samsung Galaxy S24
(2, 11, 1), -- ASUS ROG Strix
(2, 20, 2), -- Футболка с принтом

(3, 8, 3),  -- Xiaomi 14
(3, 21, 5), -- Футболка поло
(3, 22, 2), -- Джинсы классические

(4, 3, 2),  -- iPhone 14
(4, 23, 3), -- Джинсы скинни
(4, 28, 1), -- Холодильник Samsung

(5, 10, 4), -- Redmi Note 13
(5, 24, 2), -- Джинсы джоггеры
(5, 32, 1), -- Пылесос Dyson

(6, 2, 1),  -- iPhone 15
(6, 18, 1), -- MacBook Air 13"
(6, 19, 10), -- Футболка хлопковая черная (много!)

(7, 4, 1),  -- iPhone 13
(7, 19, 2), -- Футболка хлопковая черная

(8, 6, 1),  -- Samsung Galaxy S23
(8, 20, 1), -- Футболка с принтом

(9, 9, 2),  -- Xiaomi 13T
(9, 21, 1), -- Футболка поло

(10, 7, 1), -- Samsung Galaxy A54
(10, 22, 2), -- Джинсы классические

(11, 12, 1), -- MSI Katana
(11, 23, 1), -- Джинсы скинни

(12, 13, 1), -- Lenovo Legion
(12, 24, 1), -- Джинсы джоггеры

(13, 14, 1), -- Dell XPS 13
(13, 25, 1), -- Куртка джинсовая

(14, 15, 1), -- HP Spectre
(14, 26, 1), -- Куртка ветровка

(15, 16, 1), -- Lenovo ThinkPad
(15, 27, 1), -- Куртка кожаная

(16, 28, 1), -- Холодильник Samsung
(16, 30, 1), -- Стиральная машина Bosch

(17, 31, 1), -- Стиральная машина Indesit
(17, 32, 2); -- Пылесос Dyson

REFRESH MATERIALIZED VIEW product_top_level_categories;
REFRESH MATERIALIZED VIEW top_five_sold_last_month;

COMMIT;
